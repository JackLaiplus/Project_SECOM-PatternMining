# Project_SECOM-PatternMining

專案背景簡介，SECOM 是一組由 UCI Machine Learning Repository 提供的工業製程資料集，完整名稱是 SECOM Manufacturing Data Set。這份資料集來源於一家半導體製造公司（實際公司名稱未公開），主要應用場景用來進行製程品質監控與瑕疵預測（如早期故障偵測、品質異常檢測等）。

而本專案即以 SECOM 資料為基礎，欲進行感測器數據中潛在模式的群組分析與視覺化挖掘。本專案名稱強調了兩個重點：(1)資料來源與場域是 SECOM 製造的感測器資料，(2)核心任務是進行模式挖掘（如：群組間差異、潛在關聯、異常感測器行為）


故本專案目的是從這些大量感測器數據中找出與產品瑕疵（`y=1`）有關的潛在模式與異常。即感測器數據摘要與維度縮減、群組分析（如：以 y 為分群依據來比較感測器行為）

### 🎯 專案目標

1. **群組分析**
   - 以目標變數 `y`（0 = 正常產品，1 = 有缺陷）進行群組分群。
   - 分析各感測器在不同群組下的統計特徵（平均值、標準差、極值等）。

2. **建模與評估**
   - 以 SVM（RBF kernel） 為核心分類器，結合缺失值處理與標準化；視資料維度與共線性情況，可選配 PCA 作降維再接 SVM。

3. **模型可視化分析**
   - 提供混淆矩陣與ROC 曲線等與分類效能直接相關的圖表。

### 📊 資料集說明

本專案使用來自 UCI Machine Learning Repository 的 SECOM 製造感測器資料集（2008），其來源為一家半導體製造公司，用感測器監控製程品質並預測產品是否不良。該資料集為高維感測器資料，常用於資料探勘中的特徵選取、維度縮減、分類建模與異常偵測任務。

- 資料集概覽

| 項目    | 數量                                 |
| ----- | ---------------------------------- |
| 資料筆數  | 1567                               |
| 總欄位數  | 592                                |
| 感測器欄位 | 590 個（欄位名稱為 `0`～`589`）             |
| 時間欄位  | `Time`（1567筆時間戳）            |
| 目標變數  | `Pass/Fail`（`1` = 通過檢測，`-1` = 不合格） |

- 目標變數`y` - Pass/Fail
  - 類別型變數，用來表示每一筆樣本是否為瑕疵產品

- 資料特性
  - 多數感測器變數存在不同程度的缺失值，部分欄位缺失超過 90%
  - 各感測器變數為連續型資料，但未提供具體單位或感測器名稱（為匿名特徵）
  - 存在大量共線性、零變異或極端值變數，適合進行資料清洗與降維處理

### 🛠️ 使用技術

本專案使用機器學習（Machine Learning, ML）技術中的**統計模型**與方法包括：核心分類器 sklearn.svm.SVC（RBF kernel）、**特徵工程**轉換器 sklearn.impute.SimpleImputer 與 sklearn.preprocessing.StandardScaler、模型選擇與驗證 sklearn.model_selection.GridSearchCV（搭配 StratifiedKFold），並以 sklearn.pipeline.Pipeline 將 Imputer → Scaler → SVC 串接為可重現的端到端流程。

在**特徵工程**部份，資料具高維度、缺失比例高、強共線與類別不平衡等典型製程特性；因此於建模前以 SimpleImputer 進行中位數缺失值填補，再以 StandardScaler 做標準化（零均值、單位變異），以降低量測尺度差異與極端值對 SVM 超平面的影響。上述轉換皆只以訓練資料估計參數，在驗證與測試階段僅進行轉換，避免資料洩漏並提升泛化穩定度。

在**統計模型**與學習流程上，核心分類器採 SVC（RBF），並設定 class_weight="balanced" 以緩解類別不平衡。同時透過 GridSearchCV 搭配 分層交叉驗證（StratifiedKFold） 進行超參數搜尋，以 ROC AUC 為主要選模指標，並同步監控 F1、Recall、Precision、Accuracy 等衡量指標。整體以 Pipeline 一體化管理前處理與模型，確保流程不洩漏、可重現、可部署。

相關工具：

- Python 3.x
- Pandas / NumPy
- Matplotlib
- Seaborn
- Scikit-learn
- Jupyter Notebook

### 📈 分析與結論

| 分析步驟           | 主要觀察                                                                                                                                                                                            | 關鍵發現與建議                                                                                                                                                                                                                                                                                                                                                                                |
| -------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **資料探索**       | - 資料結構：1567 筆資料、592 欄位（590 感測器 + 時間欄位 + Pass/Fail欄位）<br>- 缺失值：比例高，部分感測器缺失率超過 90%<br>- 目標變數分布：Pass/Fail 類別不平衡（Fail 样本比例低）<br>- 變異檢查：偵測到零變異與高度共線性欄位                                               | - 缺失值需填補或刪除<br>- 移除零變異與高度共線性欄位以提升模型效率<br>- 需處理類別不平衡（重抽樣/加權）                                                                                                                                                                                                                                                                                                                            |
| **群組分析**       | - 統計摘要：針對 Pass/Fail 群組計算每感測器均值、標準差、缺失率<br> - 效果量 (SMD)：計算標準化平均差異（SMD）篩選關鍵感測器<br> - 顯著性檢定：進行 Welch t 檢定與 Benjamini–Hochberg 校正                                                                   | - 高 SMD 感測器可能與瑕疵高度相關<br>- 少數感測器顯著差異，建議優先分析與驗證                                                                                                                                                                                                                                                                                                                                          |
| **視覺化分析（SVM）** | - **ROC 曲線與 AUC**：曲線整體位於隨機線上方，AUC 反映整體區分能力；需特別檢視高召回區間（Recall 高）時 FPR 的上升幅度。<br>- **混淆矩陣**：觀察 FN（漏檢）與 FP（誤報）的分布；在製程情境中，FN 風險通常高於 FP。<br>- **CV vs. 測試集**：交叉驗證與測試 AUC 差距小代表泛化穩定；差距大可能有過擬合或資料洩漏風險。 | - **決策閾值調整**：建議以 Recall 為優先（例如設定 Recall ≥ 0.90/0.95），並在可接受的 FP 成本下調整 `predict_proba` 閾值與成本矩陣。<br>- **不平衡評估加強**：除 ROC 外，加入 **PR 曲線 / AP** 監控；可追蹤 **Recall\@FPR≤5%**；必要時使用 `class_weight='balanced'` 搭配 SMOTE。<br>- **錯誤分析與灰區策略**：針對 FN 回溯站別/時段/關鍵感測器；對接近閾值的樣本設置灰區，採二階段複檢以降低風險。<br>- **模型運維**：保存完整 Pipeline（Imputer→Scaler→PCA〈若有〉→SVM），監測資料漂移並定期重訓；若要用分數做風險排序，建議進行機率校準（Platt/Isotonic）。 |
| **綜合結論**       | - 品質異常相關特徵：高 SMD 與顯著差異感測器為重點特徵來源<br>- 特徵降維建議：資料高維且相關性強                                                                                                                                          | - 清理缺失與冗餘後建模可提升效率與準確率<br>- 可導入異常偵測模型做早期品質預警<br>- 特徵群組化有助於理解製程關聯                                                                                                                            

### 📚 參考資料

資料來源： UCI SECOM 資料集 https://archive.ics.uci.edu/dataset/179/secom

### 🚀 如何使用

```bash
git clone https://github.com/JackLaiplus/Project_MLforInfidelity.git
cd Project_SECOM_PatternMining
pip install -r requirements.txt
jupyter notebook Project_SECOM_PatternMining.ipynb
```


