# Project_SECOM-PatternMining

本專案源自 BDSE37 Data Mining 課堂上的資料集(Dataset)分析作業，此資料集來源於 SECOM。SECOM 是一組由 UCI Machine Learning Repository 提供的工業製程資料集，完整名稱是 SECOM Manufacturing Data Set。而資料集來源於一家半導體製造公司（實際公司名稱未公開），主要應用場景用來進行製程品質監控與瑕疵預測（如早期故障偵測、品質異常檢測等），

- 本專案欲探討用 __機器學習（Machine Learning, ML）__ 技術在面對這份半導體產線的感測器大量數據資料集（欄位多、缺值多、分布不均）時，如何將這份資料集做二元分類，進而發掘隱藏的規律與模式（如：群組間差異、潛在關聯、異常感測器行為）

故本專案旨在以最直觀的方式，來找出最可能導致不良的感測器與異常模式，並把發現轉化為可以落地的製程監控與改善建議。專案目的是從這些大量感測器數據中找出與產品瑕疵（`y=1`）有關的潛在模式與異常。

### 🎯 專案目標

1. **群組分析**
   - 以目標變數 `y`（0 = 正常產品，1 = 有缺陷）進行群組分群。
   - 分析各感測器在不同群組下的統計特徵（平均值、標準差、極值等）。

2. **視覺化分析**
   - 使用圖表工具（箱型圖、熱圖、SVM 等）呈現感測器在不同群組中的分布與變異。
   - 協助發現可能關鍵的異常感測器。

### 📊 資料集說明

本專案使用來自 UCI Machine Learning Repository 的 SECOM 製造感測器資料集（2008），其來源為一家半導體製造公司，用感測器監控製程品質並預測產品是否不良。該資料集為高維感測器資料，常用於資料探勘中的特徵選取、維度縮減、分類建模與異常偵測任務。

- 資料集概覽

| 項目    | 數量                                 |
| ----- | ---------------------------------- |
| 資料筆數  | 1567                               |
| 總欄位數  | 592                                |
| 感測器欄位 | 590 個（欄位名稱為 `0`～`589`）             |
| 時間欄位  | `Time`（1567筆時間戳）            |
| 目標變數  | `Pass/Fail`（`1` = 通過檢測，`-1` = 不合格） |

- 目標變數`y` - Pass/Fail
  - 類別型變數，用來表示每一筆樣本是否為瑕疵產品

- 資料特性
  - 多數感測器變數存在不同程度的缺失值，部分欄位缺失超過 90%
  - 各感測器變數為連續型資料，但未提供具體單位或感測器名稱（為匿名特徵）
  - 存在大量共線性、零變異或極端值變數，適合進行資料清洗與降維處理

### 🛠️ 使用技術

**(1) 建模與資料分析工具**
- 語言與環境：Python 3.x、Jupyter Notebook
- 資料處理：Pandas、NumPy
- 視覺化：Matplotlib、Seaborn
- 機器學習（scikit-learn）：  
  - 前處理／特徵工程：sklearn.impute.SimpleImputer、sklearn.preprocessing.StandardScaler、（視需要）sklearn.decomposition.PCA
  - 分類器：sklearn.svm.SVC（RBF kernel）
  - 驗證與選模：sklearn.model_selection.GridSearchCV、StratifiedKFold、train_test_split
  - 指標：roc_auc_score、f1_score、recall_score、precision_score、accuracy_score、roc_curve、confusion_matrix、classification_report
  - 管線化：sklearn.pipeline.Pipeline

**(2) 建模與分析流程**
1.  資料切分：train_test_split（stratify=y、固定 random_state）確保類別比例一致。
2.  前處理／特徵工程（全程放入 Pipeline，只用訓練集 fit，驗證/測試僅 transform，避免資料洩漏）：
    - 缺失值填補：SimpleImputer(strategy="median")
    - 標準化：StandardScaler(with_mean=True, with_std=True)
    - (視需要)降維：PCA（處理強共線與冗餘；可用保留變異比例如 0.95）
3. 建模：SVC(kernel="rbf", class_weight="balanced", probability=True)
4. 超參數搜尋：GridSearchCV + StratifiedKFold(5)，以 ROC AUC 為 refit 主指標，同步追蹤 F1／Recall／Precision／Accuracy；常見搜尋空間：C、gamma（與 PCA n_components 若使用 PCA）。
5. 評估與視覺化：
    - ROC 曲線／AUC：整體區分能力
    - 混淆矩陣與分類報告：觀察 FN/FP 與各指標
    - （視需要）PR 曲線：不平衡情境下更貼近實務
6. 閾值與營運策略：以 predict_proba 或 decision function 調整決策閾值，Recall 優先（降低漏檢）；建立灰區複檢。
7. 產出與重現：保存整條 Pipeline（Imputer→Scaler→〔PCA〕→SVC）為單一模型檔（joblib），固定隨機種子、記錄超參數與版本。
8. 持續監控：定期檢查資料／概念漂移（指標漂移、特徵分布變化），必要時觸發重訓。

### 📈 分析與結論

| 分析步驟      | 主要觀察                                                                                                                                                                                                     | 關鍵發現與建議                                                                                                                                                            |
| --------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **資料探索**  | - 資料：1567 筆、592 欄（590 個感測器）<br>- 缺失值：部分感測器缺失率超過 90% <br>- 目標分布：Fail 樣本比例低 <br>- 變異檢查：是否存在零變異與高度共線                                                                       | - 缺失值需填補或刪除<br>- 移除零變異與高共線特徵 <br>- 處理類別不平衡（重抽樣/加權）                                                                                                         |
| **群組分析**  | - 以 `y`（0=正常、1=缺陷）進行**分群比較**<br>- 對每個感測器計算：平均數、標準差、極值範圍、缺失率<br>- 以\*\*效果量（SMD）\*\*與 **Welch t 檢定 + BH 校正**評估群組差異顯著性與強度                                                                                   | - 依 **SMD 排名**產出「候選關鍵感測器清單」；先聚焦 SMD 大且經多重校正後仍顯著者<br>- 對**高缺失/高波動**但差異大的感測器，進一步驗證與補強數據品質<br>- 將關鍵感測器**群組化**（同站別/同機理/高相關簇），做後續特徵萃取與監控                                |
| **視覺化分析** | - **箱型圖/直方圖**：顯示兩群在中位數、離散度與極端值上的差異，快速定位**異常分布**的感測器<br>- **相關係數熱圖**：呈現感測器間的**高度相關簇**與冗餘結構，利於後續特徵降維或群組化<br>- **SVM 衍生視覺**：以 **decision function / predict\_proba 分數分布**（分群上色）觀察可分性；搭配 **ROC/PR 曲線**總覽分類能力 | - 針對箱型圖差異明顯者納入**重點監控名單**；對極端值頻發者考慮 Winsorize/穩健尺度<br>- 依熱圖簇狀結構進行**特徵群組化或降維**（如 PCA on cluster）以減少冗餘<br>- 以 **分數分布 + ROC/PR** 選定**營運閾值**（優先兼顧 Recall），並建立**灰區複檢**流程 |
| **綜合結論**  | - 品質異常相關特徵：高 SMD 且經檢定顯著的感測器是首要線索；其相關簇反映潛在製程機理<br>- 特徵降維建議：在高度相關情境下先**群組化/降維**再導入分類器                                                                                                                      | - 先做缺失處理與冗餘壓縮，再建模可同時提升**效率與泛化**<br>- 以 SVM 的分數視覺化設定**Recall 優先的閾值**，並導入**二階段複檢**降低漏檢<br>- 循環式以**錯誤分析 → 感測器驗證 → 特徵調整**持續改進模型與製程監控                                   |
                                                                                                                      

### 📚 參考資料

資料來源： UCI SECOM 資料集 https://archive.ics.uci.edu/dataset/179/secom


